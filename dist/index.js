"use strict";import"bootstrap";import{Modal as l}from"bootstrap";export class ContactForm{constructor(e){this.successModal=null;this.serverScript=e;const s=document.querySelector("#success");s&&(this.successModal=new l(s)),this.messageAlert=document.querySelector("#message-alert"),this.initializeEventListeners()}initializeEventListeners(){document.querySelector("#sendmessage")?.addEventListener("click",()=>this.handleSubmit())}isEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}messageSuccess(){["#name","#email","#message"].forEach(e=>{const s=document.querySelector(e);s&&(s.value="")}),document.querySelector("#contactCancel")?.click(),this.successModal&&this.successModal.show()}async sendMessage(e){const s=new FormData;Object.entries(e).forEach(([t,n])=>s.append(t,n));try{const t=await fetch(this.serverScript,{method:"POST",body:s}),n=await t.json(),r=n.message||"An error occurred. Please try again later.";if(!t.ok||n.status!=="success"){this.displayAlert(r);return}this.messageSuccess()}catch(t){console.error("Error sending message",t),this.displayAlert("An unexpected error occurred. Please try again later.")}}handleSubmit(){const e=document.querySelector("#email"),s=document.querySelector("#message");if(!e||!s){console.error("Email or message element not found");return}const t=e.value,n=s.value;if(!t||!this.isEmail(t)){this.displayAlert("Please enter a valid email address");return}if(!n){this.displayAlert("Please enter a message");return}const a={name:document.querySelector("#name")?.value||"",email:t,message:n};this.sendMessage(a)}displayAlert(e){this.messageAlert?(this.messageAlert.innerHTML=e,this.messageAlert.style.display="block"):console.error("Message alert element not found.")}}
